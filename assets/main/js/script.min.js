import{preloadImages}from"../../libs/utils.js";$=jQuery;let lenis=new Lenis;function customDropdown(){let e=document.querySelectorAll(".dropdown-custom");function a(i){e.forEach(e=>{var t=e.querySelector(".dropdown-custom-menu"),r=e.querySelector(".dropdown-custom-btn");i&&e===i||(t.classList.remove("dropdown--active"),r.classList.remove("--active"))})}e.forEach(t=>{let r=t.querySelector(".dropdown-custom-btn"),i=t.querySelector(".dropdown-custom-menu");var e=t.querySelectorAll(".dropdown-custom-item");let o=t.querySelector(".value-select");r.addEventListener("click",function(e){e.stopPropagation(),a(t),i.classList.toggle("dropdown--active"),r.classList.toggle("--active")}),document.addEventListener("click",function(){a()}),e.forEach(i=>{i.addEventListener("click",function(e){e.stopPropagation();var e=o.querySelector("img"),e=e?e.src:"",t=o.querySelector("span").textContent,r=(o.innerHTML,i.innerHTML),r=(o.innerHTML=r,"Time"===t.trim());r||(i.innerHTML=e?`<img src="${e}" alt="" /><span>${t}</span>`:`<span>${t}</span>`),a()})}),window.addEventListener("scroll",function(){i.closest(".header-lang")&&(i.classList.remove("dropdown--active"),r.classList.remove("--active"))})})}function marquee(){document.querySelectorAll(".marquee-container").forEach(e=>{let t=e.querySelector(".marquee-content");var r=[...e.querySelectorAll(".marquee-item")],i=parseFloat(e.getAttribute("data-speed"))||50,o=(t.innerHTML="",r.forEach(e=>t.appendChild(e.cloneNode(!0))),[...t.children]);let a=0;o.forEach(e=>a+=e.offsetWidth);var r=e.offsetWidth,s=Math.ceil(r/a)+2;for(let e=0;e<s;e++)o.forEach(e=>{t.appendChild(e.cloneNode(!0))});let n=0,l=([...t.children].forEach(e=>n+=e.offsetWidth),gsap.set(t,{x:0,willChange:"transform",force3D:!0}),gsap.timeline({repeat:-1}));l.to(t,{x:-n,duration:n/i,ease:"none",modifiers:{x:e=>parseFloat(e)%n+"px"}}),!parseFloat(e.getAttribute("hover-pause"))&&1||(e.addEventListener("mouseenter",()=>l.pause()),e.addEventListener("mouseleave",()=>l.resume()))})}function sectionOurMission(){if(!($(".our-mission").length<1||$(window).width()<991)){let e=$(".our-mission .mission-item");e.on("mouseenter",function(){e.removeClass("active"),$(this).addClass("active")})}}function personalSwiper(){$(".personal-swiper").length&&new Swiper(".personal-swiper",{slidesPerView:2.5,spaceBetween:16,loop:!1,speed:600,pagination:{el:".personal-swiper .swiper-pagination",type:"progressbar"},navigation:{nextEl:".personal-swiper .swiper-button-next",prevEl:".personal-swiper .swiper-button-prev"},breakpoints:{0:{slidesPerView:1.3,slidesOffsetAfter:16,spaceBetween:32},768:{slidesPerView:2,spaceBetween:16},1024:{slidesPerView:2.5}}})}function participantsSwiper(){$(".participants-swiper").length&&new Swiper(".participants-swiper",{slidesPerView:2.5,spaceBetween:16,loop:!1,speed:600,pagination:{el:".participants-swiper .swiper-pagination",type:"progressbar"},navigation:{nextEl:".participants-swiper .swiper-button-next",prevEl:".participants-swiper .swiper-button-prev"},breakpoints:{0:{slidesPerView:1},768:{slidesPerView:2},1024:{slidesPerView:3}}})}function footer(){$(".footer").length<1||$(".footer-agenda .content-item .cta").on("click",function(){var e=$(this).closest(".content-item"),t=e.index();$(".footer-agenda .content-item, .agenda-main__image ellipse").removeClass("active"),e.addClass("active"),$(".agenda-main__image ellipse.shadow-"+(t+1)).addClass("active")})}lenis.on("scroll",ScrollTrigger.update),gsap.ticker.add(e=>{lenis.raf(1e3*e)}),gsap.ticker.lagSmoothing(0),document.addEventListener("DOMContentLoaded",()=>{gsap.registerPlugin(ScrollTrigger,DrawSVGPlugin),document.querySelectorAll(".draw_svg").forEach(e=>{e.querySelectorAll("path").forEach(e=>{gsap.set(e,{drawSVG:"0%"}),gsap.to(e,{drawSVG:"100%",duration:2,ease:"none",scrollTrigger:{trigger:".intro-line",start:"top 80%",end:"bottom 80%"}})})})});let headerHeight=document.querySelector("#header").offsetHeight;function effectText(){gsap.registerPlugin(ScrollTrigger,SplitText),gsap.utils.toArray(".data-fade-in").forEach(e=>{var t=parseFloat(e.dataset.delay)||0;gsap.fromTo(e,{"will-change":"opacity, transform",opacity:0,y:20},{scrollTrigger:{trigger:e,start:"top 80%",end:"bottom 80%"},opacity:1,y:0,duration:.5,ease:"sine.out",delay:t})}),gsap.utils.toArray(".effect-line").forEach(e=>{var t=new SplitText(e,{type:"lines",linesClass:"line",mask:"lines"}),r=parseFloat(e.dataset.delay)||0;gsap.fromTo(t.lines,{yPercent:100,willChange:"transform"},{yPercent:0,duration:1,ease:"power3.out",stagger:.05,delay:r,scrollTrigger:{trigger:e,start:"top 80%"}})}),gsap.utils.toArray(".effect-line-footer").forEach(e=>{var t=new SplitText(e,{type:"lines",linesClass:"line",mask:"lines"}),e=parseFloat(e.dataset.delay)||0;gsap.fromTo(t.lines,{yPercent:100,willChange:"transform"},{yPercent:0,duration:1,ease:"power3.out",stagger:.05,delay:e,scrollTrigger:{trigger:".footer-main",start:"top 70%"}})})}function header(){$("#header").length<1||($(".header-hamburger, .header-menu__overlay").on("click",function(){$(this).toggleClass("active"),$("#header .menu, #header .header-menu__overlay").toggleClass("open"),$(".header-hamburger").hasClass("active")?lenis.stop():lenis.start()}),$(window).width()<991&&(gsap.registerPlugin(ScrollTrigger),ScrollTrigger.create({start:"top top",end:"bottom bottom",onUpdate:e=>{var t=$("#header");0===window.scrollY?t.removeClass("scroll-down scrolling"):(t.addClass("scrolling"),1===e.direction?t.addClass("scroll-down"):t.removeClass("scroll-down"))}})))}document.querySelectorAll("section[id], footer[id]").forEach(r=>{let i=document.querySelector(`#header a[href="#${r.id}"]`);if(i){let e,t;t="footer"===r.tagName.toLowerCase()?(e="top bottom","bottom bottom"):(e="top bottom-=200","bottom bottom-=200"),ScrollTrigger.create({trigger:r,start:e,end:t,onEnter:()=>{document.querySelectorAll('#header a[href^="#"]').forEach(e=>e.classList.remove("active")),i.classList.add("active")},onEnterBack:()=>{document.querySelectorAll('#header a[href^="#"]').forEach(e=>e.classList.remove("active")),i.classList.add("active")}})}});let swiperInstance=null;function sectionTarget(){$(".our-target").length<1||(window.innerWidth<=1024&&!swiperInstance?swiperInstance=new Swiper(".target-swiper",{spaceBetween:16,loop:!1,speed:600,pagination:{el:".target-swiper .swiper-pagination",type:"progressbar"},navigation:{nextEl:".target-swiper .swiper-button-next",prevEl:".target-swiper .swiper-button-prev"},breakpoints:{0:{slidesPerView:1},768:{slidesPerView:2},992:{slidesPerView:3}}}):1024<window.innerWidth&&swiperInstance&&(swiperInstance.destroy(!0,!0),swiperInstance=null))}let init=()=>{gsap.registerPlugin(ScrollTrigger),marquee(),sectionOurMission(),customDropdown(),personalSwiper(),participantsSwiper(),sectionTarget(),header(),footer(),effectText()},isLinkClicked=(preloadImages("img").then(()=>{init()}),!1);$("a").on("click",function(e){!this.href||this.href.match(/^#/)||this.href.match(/^javascript:/)||(isLinkClicked=!0)}),$(window).on("beforeunload",function(){isLinkClicked||$(window).scrollTop(0),isLinkClicked=!1});